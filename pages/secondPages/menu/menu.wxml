<!-- pages/drinkDetail/drinkDetail.wxml -->
<view class="container">
  <!-- 返回按钮和标题 -->
  <view class="flex items-center py-4 px-4 bg-white shadow-md fixed top-0 left-0 right-0 z-10">
    <button class="w-10 h-10 flex items-center justify-center" bindtap="navigateBack">
      <image class="w-6 h-6" src="/static/icons/back.png"></image>
    </button>
    <text class="text-xl font-bold ml-4">{{drinkInfo.name}}</text>
  </view>

  <!-- 饮品图片 -->
  <view class="drink-image pt-16">
    <image class="w-full h-64 object-cover" src="{{drinkInfo.image || 'https://picsum.photos/400/200?food=default'}}" mode="aspectFill"></image>
  </view>

  <!-- 饮品名称和描述 -->
  <view class="header px-4 py-4">
    <text class="name text-2xl font-bold">{{drinkInfo.name}}</text>
    <text class="desc text-gray-500 mt-2">{{drinkInfo.desc}}</text>
  </view>

  <!-- 甜度说明 -->
  <view class="section px-4 py-2">
    <text class="section-title font-bold">{{drinkInfo.sweetness}}</text>
    <text class="note text-gray-500 text-sm">{{drinkInfo.sweetnessDesc}}</text>
  </view>

  <!-- 杯型选择 -->
  <view class="section px-4 py-2">
    <text class="section-title font-bold">杯型</text>
    <view class="options flex flex-wrap mt-2">
      <block wx:for="{{drinkInfo.sizeOptions}}" wx:key="value">
        <view class="option w-1/3 text-center py-2 my-1 border border-gray-300 rounded {{selectedSize === item.value ? 'border-blue-500 bg-blue-50' : ''}}" bindtap="selectSize" data-size="{{item.value}}" data-price="{{item.price}}">
          {{item.text}} {{item.price > 0 ? '+¥' + item.price : ''}}
        </view>
      </block>
    </view>
  </view>

  <!-- 主题杯选择 -->
  <view class="section px-4 py-2">
    <text class="section-title font-bold">主题杯可选</text>
    <view class="options flex flex-wrap mt-2">
      <block wx:for="{{drinkInfo.themeOptions}}" wx:key="value">
        <view class="option w-1/3 text-center py-2 my-1 border border-gray-300 rounded {{selectedtheme === item.value ? 'border-blue-500 bg-blue-50' : ''}}" bindtap="selectTheme" data-theme="{{item.value}}">
          {{item.text}}
        </view>
      </block>
    </view>
  </view>

  <!-- 口味选择 -->
  <view class="section px-4 py-2">
    <text class="section-title font-bold">口味</text>
    <view class="options flex flex-wrap mt-2">
      <block wx:for="{{drinkInfo.tasteOptions}}" wx:key="value">
        <view class="option w-1/3 text-center py-2 my-1 border border-gray-300 rounded {{selectedtaste === item.value ? 'border-blue-500 bg-blue-50' : ''}}" bindtap="selectTaste" data-taste="{{item.value}}">
          {{item.text}}
        </view>
      </block>
    </view>
  </view>


  <!-- 甜度选择 -->
  <view class="section px-4 py-2">
    <text class="section-title font-bold">甜度</text>
    <view class="options flex flex-wrap mt-2">
      <block wx:for="{{drinkInfo.sweetOptions}}" wx:key="value">
        <view class="option w-1/3 text-center py-2 my-1 border border-gray-300 rounded {{selectedsweet === item.value ? 'border-blue-500 bg-blue-50' : ''}}" bindtap="selectSweet" data-sweet="{{item.value}}">
          {{item.text}}
        </view>
      </block>
    </view>
  </view>

  <!-- 温度选择 -->
  <view class="section px-4 py-2">
    <text class="section-title font-bold">温度</text>
    <view class="options flex flex-wrap mt-2">
      <block wx:for="{{drinkInfo.tempOptions}}" wx:key="value">
        <view class="option w-1/3 text-center py-2 my-1 border border-gray-300 rounded {{selectedTemp === item.value ? 'border-blue-500 bg-blue-50' : ''}}" bindtap="selectTemp" data-temp="{{item.value}}">
          {{item.text}}
        </view>
      </block>
    </view>
  </view>

  <!-- 茶底选择 -->
  <view class="section px-4 py-2">
    <text class="section-title font-bold">茶底</text>
    <view class="options flex flex-wrap mt-2">
      <block wx:for="{{drinkInfo.teaOptions}}" wx:key="value">
        <view class="option w-1/3 text-center py-2 my-1 border border-gray-300 rounded {{selectedTea === item.value ? 'border-blue-500 bg-blue-50' : ''}}" bindtap="selectTea" data-tea="{{item.value}}">
          {{item.text}}
        </view>
      </block>
    </view>
  </view>

  <!-- 加料选择 -->
  <view class="section px-4 py-2">
    <text class="section-title font-bold">加料</text>
    <view class="options flex flex-wrap mt-2">
      <block wx:for="{{drinkInfo.toppingOptions}}" wx:key="value">
        <view class="option w-1/3 text-center py-2 my-1 border border-gray-300 rounded {{selectedTopping === item.value ? 'border-blue-500 bg-blue-50' : ''}}" bindtap="selectTopping" data-topping="{{item.value}}" data-price="{{item.price}}">
          {{item.text}} +¥{{item.price}}
        </view>
      </block>
    </view>
  </view>



  <view class="footer fixed bottom-0 left-0 right-0 bg-white shadow-md p-4 flex items-center justify-between">
    <view class="price-container">
      <text class="price text-xl font-bold text-red-500">¥{{totalPrice * quantity}}</text>

    </view>
    <text class="selection text-sm text-gray-500">{{currentSelection}}</text>
    <view class="section">
      <view class="cart-actions flex items-center">
        <button class="w-8 h-8 flex items-center justify-center border border-gray-300 rounded-full" bindtap="decreaseQuantity">-</button>
        <text class="mx-2">{{quantity}}</text>
        <button class="w-8 h-8 flex items-center justify-center border border-gray-300 rounded-full" bindtap="increaseQuantity">+</button>
      </view>
    </view>
    <button class="add-btn bg-red-500 text-white px-6 py-2 rounded-full" bindtap="addToCart">加入购物车</button>
  </view>
</view>